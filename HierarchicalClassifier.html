<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Hierarchical classifier</title>
</head>
<body>

<script>
	(function( d, undefined ){
		"use strict";

/**********************************************************************************************************************/
		/**
		 * Function-constructor for Node object
		 * @param childName name of created Node
		 * @param [parent] of added Node
		 * @constructor
		 */
		function Node ( childName, parent ){
			this.name = childName;
			this.parent = parent instanceof Node ? parent : undefined;
			this.childs = [];
		}

		Node.prototype.addChilds = function( node ){
			if( node instanceof Array ){
				for( var i in node ){
					this.childs.push( node[i] );
				}
			} else {
				this.childs.push( node );
			}
		};

		Node.prototype.getChilds = function( ){
			var self = this;

			return (function getChild(){
				var res = [];

				for( var i in self.childs ) {

					var node = self.childs[i];
					var childs = node.getChilds( );
					if( !!childs && childs.length ) {
						for ( var i in childs ) {
							res.push( childs[i] );
						}
					}
					res.push( node );

				}
				return res;
			})();
		};

/**********************************************************************************************************************/
		/**
		 * Function-constructor for Graph object
		 * @constructor
		 */
		function Graph( child ) {
			this.root = new Node( child );
			console.log( this.root );

			this.search = function( nodeName ){

				var rootInstance = this.root;

				// passed nodeName is the root Node?
				if ( rootInstance.name === nodeName ) {
					//return him
					return rootInstance;
				} else {

					for ( var node in rootInstance.childs ) {
						if ( rootInstance.childs[node].name === nodeName ) {
							return rootInstance.childs[node];
						}
					}

				}
			};

			this.addNode = function( childNode, parentNode ){

				var parent = this.search( parentNode );
				var node = new Node( childNode, parent );
				if ( !!parent ) {
					parent.addChilds( node );
				}
				console.log( node );

			};

			this.deleteNode = function( deletedNodeName ){
				var deletedNode = this.search( deletedNodeName );
				if ( !!deletedNode ) {



				}
				var parent = this.search( parentNode );
				var node = new Node( deletedNodeName, parent );
				if ( !!parent ) {
					parent.addChilds( node );
				}
				console.log( node );

			};

		}




/**********************************************************************************************************************/
		var graph = new Graph( 'Млекопитающие' );
		graph.addNode( 'Кошки', 'Млекопитающие' );
		graph.addNode( 'Мыши', 'Млекопитающие' );
		graph.addNode( 'Том', 'Кошки' );
		graph.addNode( 'Джерри', 'Мыши' );

		console.log( graph.search( 'Млекопитающие' ).getChilds( ) );

	})( document );
</script>

</body>
</html>