<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Hierarchical classifier</title>
</head>
<body>

<script>
	(function( d, undefined ){
		"use strict";
/**********************************************************************************************************************/
		/**
		 * Function-constructor for Root object (Singleton)
		 * @param item that wil be an root Node object
		 * @return {RootSingleton}
		 * @constructor
		 */
		function RootSingleton ( item ) {
			if (!RootSingleton.__instance) {
				RootSingleton.__instance = this;
			} else {
				return RootSingleton.__instance;
			}
			this.getInstance = item;
		}
/**********************************************************************************************************************/
		/**
		 * Function-constructor for Node object
		 * @param child item to add
		 * @param [parent] of added child item
		 * @constructor
		 */
		function Node ( child, parent ){
			this.name = child;
			this.parent = parent || undefined;
			if ( !!parent ) {
				this.parent.childs.push( this );
			}
			this.childs = [];
		}

		Node.prototype.addChilds = function( node ){
			if( node instanceof Array ){
				for( var i in node ){
					this.childs.push( node[i] );
				}
			} else {
				this.childs.push( node );
			}
		};

		Node.prototype.getParent = function(){
			return this.parent;
		};

		Node.prototype.getChilds = function(){
			var self = this;
			return (function(){
				var res = [];
				var temp = null;
				for( var i in self.childs ){
					temp = self.childs[i];
					if ( temp.childs.length > 0 ){
						var t = temp.getChilds();
						for (var j in t) {
							res.push( t[j] );
						}
					} else {
						res.push( temp );
					}
				}
				return res;
			})();
		};

/**********************************************************************************************************************/
		/**
		 * Function-constructor for Graph object
		 * @constructor
		 */
		function Graph( child ) {
			this.root = new Node( child );
		}

		Graph.prototype.getInstanceByName = function( nodeName ){

			var rootInstance = this.root;

			// passed nodeName is the root Node?
			if ( rootInstance.name === nodeName ) {
				//return him
				return rootInstance;
			} else {

				for (var node in rootInstance.childs) {
					if ( rootInstance.childs[node].name === nodeName ) {
						return rootInstance.childs[node];
					}
				}

			}
		};

		Graph.prototype.addNode = function( childNode, parentNode ){
			new Node( childNode, Graph.getInstanceByName( parentNode  ) );
		};

		Graph.prototype.search = function(){};

/**********************************************************************************************************************/
		var graph = new Graph( 'Млекопитающие' );
		graph.addNode( 'Кошки', 'Млекопитающие' );
		graph.addNode( 'Мыши', 'Млекопитающие' );
		graph.addNode( 'Том', 'Кошки' );
		graph.addNode( 'Джерри', 'Мыши' );

		console.log( root.getChilds() );

	})( document );
</script>

</body>
</html>